{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import'./BlogPost.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BlogPost=()=>{const{id}=useParams();const navigate=useNavigate();const[post,setPost]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadPost=async()=>{if(!id)return;try{setLoading(true);setError(null);const postId=parseInt(id);if(isNaN(postId)){setError('無効な記事IDです');return;}// インデックスから記事を検索\nconst indexModule=await import('../data/posts/index.json');const allPosts=indexModule.default.posts;const postMeta=allPosts.find(p=>p.id===postId);if(!postMeta){setError('記事が見つかりませんでした');return;}// カテゴリ別の詳細データを読み込み\ntry{const postModule=await import(\"../data/posts/\".concat(postMeta.category,\"/\").concat(postId,\".json\"));setPost(postModule.default);}catch(err){console.error(\"Failed to load post details for \".concat(postId,\":\"),err);setError('記事の詳細データの読み込みに失敗しました');}}catch(err){console.error('Error loading post:',err);setError('記事の読み込みに失敗しました');}finally{setLoading(false);}};loadPost();},[id]);const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('ja-JP',{year:'numeric',month:'long',day:'numeric'});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"blog-post-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"blog-post-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u8A18\\u4E8B\\u3092\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"})]})});}if(error||!post){return/*#__PURE__*/_jsx(\"div\",{className:\"blog-post-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"blog-post-error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u30A8\\u30E9\\u30FC\"}),/*#__PURE__*/_jsx(\"p\",{children:error||'記事が見つかりませんでした'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"back-button\",children:\"\\u623B\\u308B\"})]})});}// 画像URLを変換する関数\nconst convertImageUrl=url=>{if(!url)return null;// WordPressのURLから年月とファイル名を抽出\nconst match=url.match(/\\/(\\d{4})\\/(\\d{2})\\/([^\\/]+)$/);if(match){const[,year,month,filename]=match;return\"\".concat(process.env.PUBLIC_URL,\"/\").concat(year,\"/\").concat(month,\"/\").concat(filename);}// 既に相対パスの場合はPUBLIC_URLを付加\nif(url.startsWith('/')){return\"\".concat(process.env.PUBLIC_URL).concat(url);}return url;};// コンテンツ内の画像URLを変換\nconst convertContentImages=content=>{if(!content)return'';// img src属性のURLを変換\nreturn content.replace(/https?:\\/\\/[^\\/]+\\/wp-content\\/uploads\\/(\\d{4})\\/(\\d{2})\\/([^\"'\\s]+)/g,\"\".concat(process.env.PUBLIC_URL,\"/$1/$2/$3\"));};return/*#__PURE__*/_jsxs(\"div\",{className:\"blog-post-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"blog-post-header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"back-to-home\",children:\"\\u2190 \\u30DB\\u30FC\\u30E0\\u306B\\u623B\\u308B\"}),/*#__PURE__*/_jsx(Link,{to:\"/blog\",className:\"back-to-list\",children:\"\\u2190 \\u8A18\\u4E8B\\u4E00\\u89A7\\u306B\\u623B\\u308B\"})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"blog-post\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"blog-post-header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"blog-post-title\",children:post.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"blog-post-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"blog-post-date\",children:formatDate(post.date)}),/*#__PURE__*/_jsxs(\"span\",{className:\"blog-post-author\",children:[\"by \",post.author]}),/*#__PURE__*/_jsx(\"div\",{className:\"blog-post-categories\",children:post.categories.map((category,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"blog-post-category\",children:category},index))})]})]}),post.featuredImage&&convertImageUrl(post.featuredImage)&&/*#__PURE__*/_jsx(\"div\",{className:\"blog-post-image\",children:/*#__PURE__*/_jsx(\"img\",{src:convertImageUrl(post.featuredImage),alt:post.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"blog-post-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"blog-post-excerpt\",children:/*#__PURE__*/_jsx(\"p\",{children:post.excerpt})}),/*#__PURE__*/_jsx(\"div\",{className:\"blog-post-body\",children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:convertContentImages(post.content)}})})]})]})]});};export default BlogPost;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","BlogPost","id","navigate","post","setPost","loading","setLoading","error","setError","loadPost","postId","parseInt","isNaN","indexModule","allPosts","default","posts","postMeta","find","p","postModule","concat","category","err","console","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","className","children","onClick","convertImageUrl","url","match","filename","process","env","PUBLIC_URL","startsWith","convertContentImages","content","replace","to","title","author","categories","map","index","featuredImage","src","alt","excerpt","dangerouslySetInnerHTML","__html"],"sources":["/Users/takasaki19841121/Desktop/if-juku-main/src/BlogPost.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport './BlogPost.css';\n\ninterface Post {\n  id: number;\n  title: string;\n  excerpt: string;\n  content: string;\n  featuredImage: string;\n  link: string;\n  date: string;\n  author: string;\n  categories: string[];\n}\n\nconst BlogPost: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [post, setPost] = useState<Post | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadPost = async () => {\n      if (!id) return;\n      \n      try {\n        setLoading(true);\n        setError(null);\n        \n        const postId = parseInt(id);\n        if (isNaN(postId)) {\n          setError('無効な記事IDです');\n          return;\n        }\n        \n        // インデックスから記事を検索\n        const indexModule = await import('../data/posts/index.json');\n        const allPosts = indexModule.default.posts;\n        const postMeta = allPosts.find((p: any) => p.id === postId);\n        \n        if (!postMeta) {\n          setError('記事が見つかりませんでした');\n          return;\n        }\n        \n        // カテゴリ別の詳細データを読み込み\n        try {\n          const postModule = await import(`../data/posts/${postMeta.category}/${postId}.json`);\n          setPost(postModule.default);\n        } catch (err) {\n          console.error(`Failed to load post details for ${postId}:`, err);\n          setError('記事の詳細データの読み込みに失敗しました');\n        }\n        \n      } catch (err) {\n        console.error('Error loading post:', err);\n        setError('記事の読み込みに失敗しました');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadPost();\n  }, [id]);\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ja-JP', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"blog-post-container\">\n        <div className=\"blog-post-loading\">\n          <div className=\"loading-spinner\"></div>\n          <p>記事を読み込み中...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !post) {\n    return (\n      <div className=\"blog-post-container\">\n        <div className=\"blog-post-error\">\n          <h2>エラー</h2>\n          <p>{error || '記事が見つかりませんでした'}</p>\n          <button onClick={() => navigate(-1)} className=\"back-button\">\n            戻る\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // 画像URLを変換する関数\n  const convertImageUrl = (url: string | null | undefined): string | null => {\n    if (!url) return null;\n    \n    // WordPressのURLから年月とファイル名を抽出\n    const match = url.match(/\\/(\\d{4})\\/(\\d{2})\\/([^\\/]+)$/);\n    if (match) {\n      const [, year, month, filename] = match;\n      return `${process.env.PUBLIC_URL}/${year}/${month}/${filename}`;\n    }\n    \n    // 既に相対パスの場合はPUBLIC_URLを付加\n    if (url.startsWith('/')) {\n      return `${process.env.PUBLIC_URL}${url}`;\n    }\n    \n    return url;\n  };\n\n  // コンテンツ内の画像URLを変換\n  const convertContentImages = (content: string): string => {\n    if (!content) return '';\n    \n    // img src属性のURLを変換\n    return content.replace(/https?:\\/\\/[^\\/]+\\/wp-content\\/uploads\\/(\\d{4})\\/(\\d{2})\\/([^\"'\\s]+)/g, `${process.env.PUBLIC_URL}/$1/$2/$3`);\n  };\n\n  return (\n    <div className=\"blog-post-container\">\n      <div className=\"blog-post-header\">\n        <Link to=\"/\" className=\"back-to-home\">← ホームに戻る</Link>\n        <Link to=\"/blog\" className=\"back-to-list\">← 記事一覧に戻る</Link>\n      </div>\n      \n      <article className=\"blog-post\">\n        <header className=\"blog-post-header-content\">\n          <h1 className=\"blog-post-title\">{post.title}</h1>\n          <div className=\"blog-post-meta\">\n            <span className=\"blog-post-date\">{formatDate(post.date)}</span>\n            <span className=\"blog-post-author\">by {post.author}</span>\n            <div className=\"blog-post-categories\">\n              {post.categories.map((category, index) => (\n                <span key={index} className=\"blog-post-category\">\n                  {category}\n                </span>\n              ))}\n            </div>\n          </div>\n        </header>\n\n        {post.featuredImage && convertImageUrl(post.featuredImage) && (\n          <div className=\"blog-post-image\">\n            <img src={convertImageUrl(post.featuredImage)!} alt={post.title} />\n          </div>\n        )}\n\n        <div className=\"blog-post-content\">\n          <div className=\"blog-post-excerpt\">\n            <p>{post.excerpt}</p>\n          </div>\n          \n          <div className=\"blog-post-body\">\n            <div dangerouslySetInnerHTML={{ __html: convertContentImages(post.content) }} />\n          </div>\n        </div>\n      </article>\n    </div>\n  );\n};\n\nexport default BlogPost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}