{
  "id": 3020,
  "title": "Minecraft if鬼ごっこの作り方③(Minecraft java 1.20.1)",
  "excerpt": "if鬼ごっこの作り方②のほうでは鬼と逃走者をチームとタグで管理するのをしましたが、今回は逃走者が鬼に捕まった時の処理と人数を数える処理を紹介していきます。 firsta.mcfunction 「firsta.mcfunction」の中に以下のコマンドを追加します。 scoreboard objectives add gaming1 dummy \"\" scoreboard objectives ad...",
  "content": "if鬼ごっこの作り方②のほうでは鬼と逃走者をチームとタグで管理するのをしましたが、今回は逃走者が鬼に捕まった時の処理と人数を数える処理を紹介していきます。 firsta.mcfunction 「firsta.mcfunction」の中に以下のコマンドを追加します。 scoreboard objectives add gaming1 dummy \"\" scoreboard objectives add shi deathCount \"死亡検知\" scoreboard objectives add tsukama dummy \"\" scoreboard objectives add we dummy \"\" scoreboard objectives add we2 dummy \"\" 1行目 scoreboard objectives add gaming1 dummy \"\" 「gaming1」というスコアボードを新しく作成します。if鬼ごっこのゲームが開始している状態か終了している状態かを検知するのに使います。 2行目 scoreboard objectives add shi deathCount \"死亡検知\" 「shi」というスコアボードを新しく作成します。スコアボードのタイプは「deathCount」で、これはプレイヤーが死亡するとそのプレイヤーのスコアが自動で1増えるというものになります。 3行目 scoreboard objectives add tsukama dummy \"\" 「tsukama」というスコアボードを新しく作成します。死亡検知に使います。 4行目 scoreboard objectives add we dummy \"\" 「we」というスコアボードを新しく作成します。プレイヤーが生きている状態かどうかの検知に使います。 5行目 scoreboard objectives add we2 dummy \"\" 「we2」というスコアボードを新しく作成します。人数を数えるのに使います。 main.mcfunction 「main.mcfunction」の中に以下のコマンドを打ち込みます。 execute if score central1 gaming1 matches 1 run function if_oni_func:bigmain 「gaming1」スコアボードの中の「central1」という仮の対象のスコアが1であれば、「if_oni_func:bigmain」というファンクションを実行するというものです。この「main.mcfunction」は「tick.json」で常に読み込むことを宣言しているので上に書いた内容は常に実行されます。「execute if score central1 gaming1 matches 1」の状態であればif鬼ごっこのゲームが開始している状態というふうに扱っているので「bigmain.mcfunction」に書いた内容はゲームが開始している状態にのみ実行されることになります。 bigmain.mcfunction 「bigmain.mcfunction」の中に以下のコマンドを打ち込みます。逃走者が鬼に捕まった時の処理が1から9行目に当たり、人数を数える処理が10から13行目に当たります。 gamemode adventure @a[tag=games1,tag=!op1,scores={we=1}] gamemode spectator @a[tag=games1,tag=!op1,scores={we=0}] tag @a[scores={shi=1..},tag=toso] add shinda scoreboard players set 幽霊 tsukama 0 execute if entity @a[tag=shinda] run scoreboard players operation 幽霊 tsukama += @a[tag=shinda] we execute as @a[tag=shinda] if entity @s run scoreboard players set @s we 0 execute if score 幽霊 tsukama matches 1.. run function if_oni_func:housyu tag @a[tag=shinda] remove shinda scoreboard players set @a shi 0 scoreboard players set 逃走者人数 we2 0 scoreboard players operation 逃走者人数 we2 += @a[tag=toso] we scoreboard players set 鬼人数 we2 0 scoreboard players operation 鬼人数 we2 += @a[tag=oni] we 1行目 gamemode adventure @a[tag=games1,tag=!op1,scores={we=1}] ゲームに参加しているプレイヤーかつ、「op1」タグを持っていないプレイヤーかつ、「we」スコアが1のプレイヤー（つまり、生きているプレイヤー）のゲームモードをアドベンチャーにするということです。 2行目 gamemode spectator @a[tag=games1,tag=!op1,scores={we=0}] ゲームに参加しているプレイヤーかつ、「op1」タグを持っていないプレイヤーかつ、「we」スコアが0のプレイヤー（つまり、死んでいるプレイヤー）のゲームモードをスペクテイターにするということです。「op1」タグはゲーム中に不具合を発見し、対処する際に管理者がこのタグを持つことでゲームモードを変更することができるようになるので緊急用として一応、用意してあります。 3行目 tag @a[scores={shi=1..},tag=toso] add shinda 逃走者の中で「shi」スコアが1以上のプレイヤー（つまり、鬼に捕まった逃走者、あるいは事故死した逃走者）に「shinda」というタグを付けます。 4行目 scoreboard players set 幽霊 tsukama 0 「tsukama」スコアボードの中の「幽霊」という仮の対象のスコアを0にします。 5行目 execute if entity @a[tag=shinda] run scoreboard players operation 幽霊 tsukama += @a[tag=shinda] we 「shinda」タグを持っているプレイヤーがいたら、「tsukama」の中の「幽霊」のスコアに「shinda」タグを持っているプレイヤー全員の「we」スコアの合計を加算します。「+=」の記号は足し算を意味しますが、足す数に当たる対象を「@a」という複数にすることで対象全員のスコアの合計を一度に加算することができます。「shinda」タグを持っているプレイヤーはまだ「we」スコアが1だから、「shinda」タグを持っているプレイヤーの人数を数えていることと同じことになります。 6行目 execute as @a[tag=shinda] if entity @s run scoreboard players set @s we 0 「shinda」タグを持っているプレイヤーがいたら、そのプレイヤー全員の「we」スコアを0にするということです。 7行目 execute if score 幽霊 tsukama matches 1.. run function if_oni_func:housyu 「tsukama」の中の「幽霊」のスコアは0.05秒の間に死んだプレイヤーの人数を表しています。それが1以上の時、「if_oni_func:housyu」というファンクションを実行するということです。 8行目 tag @a[tag=shinda] remove shinda 「shinda」タグを持っているプレイヤーが誰もいないようにします。 9行目 scoreboard players set @a shi 0 全員の「shi」スコアを0にします。これをしないと復活に関するシステムに異常が出てしまいます。 10行目 scoreboard players set 逃走者人数 we2 0 「we2」の中の「逃走者人数」のスコアを0にします。 11行目 scoreboard players operation 逃走者人数 we2 += @a[tag=toso] we 5行目と同じ仕組みで、今度は「we2」の中の「逃走者人数」のスコアに逃走者の「we」スコアの合計を加算します。死んだ逃走者は「we」スコアが0だから、一緒に計算されても結果に影響はありません。 12行目 scoreboard players set 鬼人数 we2 0 「we2」の中の「鬼人数」のスコアを0にします。 13行目 scoreboard players operation 鬼人数 we2 += @a[tag=oni] we 5行目・11行目と同じ仕組みで、今度は「we2」の中の「鬼人数」のスコアに鬼の「we」スコアの合計を加算します。 housyu.mcfunction 「housyu.mcfunction」の中に以下のコマンドを打ち込みます。鬼が逃走者を捕まえた時に報酬を与える処理です。 give @r[tag=oni] minecraft:splash_potion{CustomPotionColor:6196456,display:{Name:\"\\\"イリュージョン\\\"\",Lore:[\"\\\"スピード\\\"\"]},CustomPotionEffects:[{Id:1,Amplifier:5,Duration:100}]} scoreboard players remove 幽霊 tsukama 1 1行目 give @r[tag=oni] minecraft:splash_potion{CustomPotionColor:6196456,display:{Name:\"\\\"イリュージョン\\\"\",Lore:[\"\\\"スピード\\\"\"]},CustomPotionEffects:[{Id:1,Amplifier:5,Duration:100}]} ポーションの色が「6196456」、アイテム名が「イリュージョン」、説明文が「スピード」、エフェクトIDが「1」、エフェクトの強さが「5」、効果の持続時間「100ティック」のポーションを鬼の中からランダム1人に与えるということです。 2行目 scoreboard players remove 幽霊 tsukama 1 「tsukama」スコアボードの中の「幽霊」スコアを1減らします。「bigmain.mcfunction」の7行目",
  "featuredImage": null,
  "link": "https://if-juku.net/?p=3020",
  "date": "2024-05-07",
  "author": "akitaclark0731-03@gmail.com",
  "categories": [
    "未分類"
  ]
}